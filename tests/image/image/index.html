<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>B. Get the OS Image - Embedded systems</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "B. Get the OS Image";
        var mkdocs_page_input_path = "tests/image/image.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../..">
          <img src="../../../img/tux-logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Raspberry Pi OS Labs</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Lab 1 - Setting-up Raspberry Pi OS Image</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab1/intro/">Lab 1 - Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab1/getting/">A. Getting the Raspberry Pi OS image</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab1/mounting/">B. Mounting the Raspberry Pi OS image on the host</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab1/increasing/">C. Increasing size of Raspberry Pi OS image</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab1/modifying/">D. Modifying the Raspberry Pi OS image</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab1/executing/">E. Executing commands on the Raspberry Pi OS image</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Lab 2 - Running the Raspberry Pi OS on a virtual machine on host</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab2/intro/">Lab 2 - Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab2/getting/">A. Getting the Raspberry Pi OS image</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab2/installVM/">B. Install QEMU ARM virtual machine (VM)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab2/using/">C. Using QEMU Virtual Machine</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Lab 3 - Setting-up and working with the Raspberry Pi OS without graphical user interface</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab3/intro/">Lab 3 - Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab3/writing/">A. Writing the Raspberry Pi OS image on the sd-card</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab3/connecting/">B. Accessing the headless RPI without network</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab3/setting/">C. Setting up network for ssh access</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../../image/lab3/debug/">Debug</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">QEMU</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../image/qemu/">Introduction to QEMU</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tests</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" >Test 1 - Configuring an AUV's embedded Linux</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../intro/">Introduction</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../git/">A. Git Repository</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="#">B. Get the OS Image</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#1-our-needs">1. Our needs</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-choose-the-os">2. Choose the OS</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-download-the-os-image">3. Download the OS Image</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#4-increase-the-size-of-the-img-file">4. Increase the size of the .img file</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../modif/">C. Modifying the Image</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../hostname/">D. System Identity Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../user/">E. User configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../network/">F. Network Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../ros2/">G. ROS 2 Setup</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../udev/">H. Udev Rules — Hardware Access</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../service/">I. Systemd service</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../clean/">J. Clean chroot</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../qemu/">H. Use QEMU VM (optionnal)</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Embedded systems</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Tests</li>
          <li class="breadcrumb-item">Test 1 - Configuring an AUV's embedded Linux</li>
      <li class="breadcrumb-item active">B. Get the OS Image</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="b-get-the-os-image">B. Get the OS Image</h1>
<h2 id="1-our-needs">1. Our needs</h2>
<p>First, we need to choose the proper operating system for our application. Let’s start from our requirements:</p>
<ul>
<li>The robot is equipped with a <strong>Raspberry Pi 5</strong>, so the OS must be compatible  </li>
<li>We want an <strong>open-source or free Linux-based OS</strong>  </li>
<li>We plan to use <strong>ROS 2 libraries and tools</strong> to develop our drivers and controllers  </li>
</ul>
<div class="admonition note">
<p class="admonition-title">Question 1</p>
<p>The <a href="https://docs.ros.org/en/rolling/How-To-Guides/Installing-on-Raspberry-Pi.html">ROS 2 on Raspberry Pi</a> documentation presents multiple solutions.<br />
<strong>Which configuration is preferred?</strong></p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Running ROS 2 in Docker on an embedded controller is not the preferred solution, as it adds extra software layers (which can be heavy). It is typically used when Ubuntu cannot be installed directly, or when multiple ROS versions must run side-by-side.</p>
</div>
<p>There are multiple ROS 2 distributions (versioned sets of ROS packages). How do we choose between them?<br />
We do not always select the newest distribution, as it may still be in active development. Instead, we usually choose a <strong>LTS (Long-Term Support)</strong> distribution.</p>
<div class="admonition note">
<p class="admonition-title">Question 2</p>
<p>Unless our application has specific requirements, we choose the LTS distribution with the <strong>latest EOL (End Of Life)</strong> date.<br />
<strong>Which ROS 2 distribution should we use?</strong><br />
See: <a href="https://docs.ros.org/en/rolling/Releases.html">ROS 2 Distributions</a></p>
</div>
<hr />
<h2 id="2-choose-the-os">2. Choose the OS</h2>
<p>Ubuntu provides several editions:</p>
<ul>
<li>Ubuntu Desktop  </li>
<li>Ubuntu Server  </li>
<li>Ubuntu Core  </li>
<li>...</li>
</ul>
<p>Since our target computer is an embedded, headless Raspberry Pi, we do not need a desktop environment.</p>
<p><strong>Ubuntu Server</strong> is lightweight and runs without a graphical interface, which saves computing resources on an embedded system. It is designed for reliable headless operation over SSH, which matches how robots are accessed and managed in the field. It is also widely supported by robotics tools such as ROS, making software integration easier.</p>
<p>Therefore, we will use <strong>Ubuntu Server</strong>.</p>
<p>Next, there are two main ways to install ROS 2:</p>
<ul>
<li>Using precompiled binary packages  </li>
<li>Building from source  </li>
</ul>
<p>We will install ROS 2 using the official binary packages in order to get a working setup quickly.<br />
However, ROS 2 binary packages are only provided for specific Ubuntu versions.</p>
<div class="admonition note">
<p class="admonition-title">Question 3</p>
<p><strong>What is the target Ubuntu version for your chosen ROS 2 distribution?</strong><br />
Find this information on the installation page for your ROS 2 distribution.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Ubuntu 20.04, 22.04, 24.04, 25.10</strong></p>
</div>
<hr />
<h2 id="3-download-the-os-image">3. Download the OS Image</h2>
<p>Place yourself in the <code>ubuntulab</code> folder</p>
<p>Ubuntu Server images for Raspberry Pi are available here: <a href="https://ubuntu.com/download/raspberry-pi">Install Ubuntu on a Raspberry Pi</a></p>
<p>Look for the proper Ubuntu version either on the default installer or in the archives: <a href="https://cdimage.ubuntu.com/releases/">Ubuntu releases</a>.  </p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you search your version in the archives, make sure to choose the Raspberry Pi preinstalled Server image.</p>
</div>
<p>Download Ubuntu Server. You must obtain a <code>.img.xz</code> file.<br />
Move the file in <code>ubuntulab</code></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Don't save your image in your local git repo or use a <code>.gitignore</code> so you don't push it online, as it is heavy and unecessary.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Question 4</p>
<p><strong>Decompress the xz file with the <code>xz</code> command</strong></p>
</div>
<h2 id="4-increase-the-size-of-the-img-file">4. Increase the size of the .img file</h2>
<div class="admonition note">
<p class="admonition-title">Question 4</p>
<p>Check your image and partitions sizes with <code>fdisk -l</code></p>
</div>
<p>Later, we will install ROS2 on our image but we see that our img is only a bit larger than 3G which is too small for system files and ROS2 installation.</p>
<p>Let's increase it to 8G :</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>truncate<span class="w"> </span>-s<span class="w"> </span>8G<span class="w"> </span>&lt;your_.img_file&gt;
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It requires some space on your computer</p>
</div>
<p>The image has been resized but not he partition.<br />
Now use <code>fdisk</code> to resize the root partition</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>fdisk<span class="w"> </span>&lt;your_image&gt;
</code></pre></div>
<p>Inside fdisk:</p>
<ul>
<li>Press p → see current partitions</li>
<li>Note start sector of partition 2 (in our case, it is probably 1050624)</li>
<li>Press d → delete partition 2 (don’t worry, data is safe because we will recreate it at the same start sector)</li>
<li>
<p>Press n → new partition</p>
<ul>
<li>Type primary (p)</li>
<li>Partition number: 2</li>
<li>First sector: 1050624 (must be same as before!)</li>
<li>Last sector: accept default (fill the image)</li>
</ul>
</li>
<li>
<p>Press w → write changes</p>
</li>
</ul>
<p>Check your partitions sizes again. It must have increased.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can delete the .img file after you completely finished the lab</p>
</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../git/" class="btn btn-neutral float-left" title="A. Git Repository"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../modif/" class="btn btn-neutral float-right" title="C. Modifying the Image">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../git/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../modif/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
